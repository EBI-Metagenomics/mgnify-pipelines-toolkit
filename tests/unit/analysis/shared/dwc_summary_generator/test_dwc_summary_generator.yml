- name: dwc_summary_generator test_wrong_args
  tags:
    - dwc_summary_generator
  exit_code: 2
  command: dwc_summary_generator --chromosome X
  stderr:
    contains:
      - "Error: No such option: --chromosome"
- name: dwc_summary_generator_summarise test_correct_args
  tags:
    - dwc_summary_generator
  command: dwc_summary_generator summarise -a tests/fixtures/study_summary_inputs/amplicon -r tests/fixtures/study_summary_inputs/amplicon/qc_passed_runs_5.csv -p chunk1 -otu tests/fixtures/refdb_otus
  files:
    - path: "chunk1_DADA2_PR2_16S-V3-V4_dwcready.csv"
      md5sum: 7ba4911b221dc18db850d46a89341eb2
    - path: "chunk1_DADA2_PR2_18S-V4_dwcready.csv"
      md5sum: d740118fb7e7e443da90e44329330ccc
    - path: "chunk1_DADA2_SILVA_16S-V3-V4_dwcready.csv"
      md5sum: 474813b22731f49f363b4e5cb4c6bc3d
    - path: "chunk1_DADA2_SILVA_18S-V4_dwcready.csv"
      md5sum: 3330598a33038281c5bc99e6e0727825
    - path: "chunk1_closedref_SILVA-SSU_dwcready.csv"
      md5sum: c7d3f1bc1d4e54be03f255349c7fce9e
    - path: "chunk1_closedref_PR2_dwcready.csv"
      md5sum: fbdf2c7a169e535a535a5392e3620c98
    - path: "chunk1_closedref_ITSoneDB_dwcready.csv"
      md5sum: bd695d8bceec5375aeb486bcee396be7
    - path: "chunk1_closedref_UNITE_dwcready.csv"
      md5sum: face929643e1188083572ca472febc33
- name: dwc_summary_generator_merge test_correct_args
  tags:
    - dwc_summary_generator
  command: dwc_summary_generator merge -a tests/fixtures/study_summary_inputs/amplicon -p merged
  files:
    - path: "merged_closedref_SILVA-SSU_dwcready.csv"
      md5sum: 16ac51c1fb448bdaa582b678d6bf9496
    - path: "merged_closedref_PR2_dwcready.csv"
      md5sum: 9b1edcd4ab4b485c167975dba04865fd
    - path: "merged_DADA2_SILVA_16S-V3-V4_dwcready.csv"
      md5sum: f0a175a1b8ffc47bfac20c06dde58581
    - path: "merged_DADA2_SILVA_18S-V4_dwcready.csv"
      md5sum: 6de79770e4036ff7cea1999a6aae7af8
    - path: "merged_DADA2_PR2_16S-V3-V4_dwcready.csv"
      md5sum: 46bb4e6e6bc2c8d5c2a612b7c1e4dcfe
    - path: "merged_DADA2_PR2_18S-V4_dwcready.csv"
      md5sum: e6cf6f77bf283267f41fabd4438bbfdc
    - path: "merged_closedref_ITSoneDB_dwcready.csv"
      md5sum: 0de6f35a9cb6fde5e7b121d3ca51b4c1
    - path: "merged_closedref_UNITE_dwcready.csv"
      md5sum: 82a3f0e81bda675856e1b69594769af6
