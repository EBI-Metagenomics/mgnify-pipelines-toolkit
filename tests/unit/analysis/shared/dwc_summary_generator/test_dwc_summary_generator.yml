- name: dwc_summary_generator test_wrong_args
  tags:
    - dwc_summary_generator
  exit_code: 2
  command: dwc_summary_generator --chromosome X
  stderr:
    contains:
      - "Error: No such option: --chromosome"
- name: dwc_summary_generator_summarise test_correct_args
  tags:
    - dwc_summary_generator
  command: dwc_summary_generator summarise -a tests/fixtures/study_summary_inputs/amplicon -r tests/fixtures/study_summary_inputs/amplicon/qc_passed_runs_5.csv -p chunk1 -otu tests/fixtures/refdb_otus
  files:
    - path: "chunk1_DADA2_PR2_16S-V3-V4_dwcready.csv"
      md5sum: 7ba4911b221dc18db850d46a89341eb2
    - path: "chunk1_DADA2_PR2_18S-V4_dwcready.csv"
      md5sum: d740118fb7e7e443da90e44329330ccc
    - path: "chunk1_DADA2_SILVA_16S-V3-V4_dwcready.csv"
      md5sum: 474813b22731f49f363b4e5cb4c6bc3d
    - path: "chunk1_DADA2_SILVA_18S-V4_dwcready.csv"
      md5sum: 3330598a33038281c5bc99e6e0727825
    - path: "chunk1_closedref_SILVA-SSU_dwcready.csv"
      md5sum: 481172c643eb943ca42494f056d26c41
    - path: "chunk1_closedref_PR2_dwcready.csv"
      md5sum: fbdf2c7a169e535a535a5392e3620c98
    - path: "chunk1_closedref_ITSoneDB_dwcready.csv"
      md5sum: 8be72d6cf1aafaa33f58559fc50f3de2
    - path: "chunk1_closedref_UNITE_dwcready.csv"
      md5sum: face929643e1188083572ca472febc33
- name: dwc_summary_generator_merge test_correct_args
  tags:
    - dwc_summary_generator
  command: dwc_summary_generator merge -a tests/fixtures/study_summary_inputs/amplicon -p merged
  files:
    - path: "merged_closedref_SILVA-SSU_dwcready.csv"
      md5sum: 071f7f39a183dfc95dbd2a0e7af63369
    - path: "merged_closedref_PR2_dwcready.csv"
      md5sum: f0cf892cb319d5f09cbe11534cb60730
    - path: "merged_DADA2_SILVA_16S-V3-V4_dwcready.csv"
      md5sum: e877a2160655d21d432da1d74f026eb0
    - path: "merged_DADA2_SILVA_18S-V4_dwcready.csv"
      md5sum: 10ac20a2f22906d3ab4802ca1f06d810
    - path: "merged_DADA2_PR2_16S-V3-V4_dwcready.csv"
      md5sum: b89df30bf0b82e949a2de84a3b49d2c4
    - path: "merged_DADA2_PR2_18S-V4_dwcready.csv"
      md5sum: b7546359ebbc2b7c4ab9540371129cae
